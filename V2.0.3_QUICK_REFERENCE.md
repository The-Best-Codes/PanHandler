# v2.0.3 Quick Reference

## What Changed (Session 2)

### ğŸš Manual Altitude Entry for Drone Photos

**NEW: Drone Photo Calibration**
- Import drone photo â†’ Detects DJI Neo (and other drones)
- Modal appears: "Enter drone height above ground"
- User enters altitude (50m or 164ft)
- App calculates GSD automatically
- Auto-calibrates â†’ Ready to measure

**Why needed:**
- iOS strips XMP metadata from imported photos
- GPS altitude gives wrong measurements (28x too large!)
- User's shed measured 44-46 feet instead of 12 feet

**Now:**
- Enter manual altitude from drone controller
- Accurate measurements âœ“

---

## Files Modified (Session 2)

1. **`/src/components/ManualAltitudeModal.tsx`** âœ… NEW
   - Beautiful modal UI
   - Meter/Feet toggle
   - Input validation
   - Haptic feedback

2. **`/src/screens/MeasurementScreen.tsx`** âœ… MODIFIED
   - Added state: `showManualAltitudeModal`, `pendingDroneData`
   - Added handlers: `handleManualAltitudeConfirm`, `handleManualAltitudeCancel`
   - Integrated drone detection logic
   - Modal rendered in JSX

---

## User Flow

```
Import DJI Neo photo
  â†“
App detects drone
  â†“
Modal: "Enter altitude"
[50] meters
  â†“
Tap Calibrate
  â†“
Auto-calibrates
  â†“
Measure shed â†’ 12 feet âœ“
```

---

## Testing Drone Photos

1. Import DJI Neo photo
2. **Expected:** Modal appears
3. Enter "50" meters
4. Tap "Calibrate"
5. **Expected:** Transitions to measurement, accurate results

---

## Session 1: Precision Auto-Capture

### ğŸ¯ Precision Auto-Capture (~1mm accuracy)

**More precise alignment required**:
- Bubble within **~1mm (6 pixels)** of center (was ~1.3mm / 8px)
- Tilt under **1.5Â°** (was 3Â°)
- Angle stability **1.5Â°** variance (was 3Â°)
- Motion stability **0.2** threshold (was 0.3)

**Result**: Auto-capture now triggers only when very precisely aligned - better for accurate measurements

## Why

User requested: "I want auto mode to be a little bit more precise maybe within 1 mm (on the screen)"

## Math

- Typical phone: ~160 PPI (pixels per inch)
- 1mm = 6.3 pixels
- Therefore: 6 pixels â‰ˆ 1mm

## Testing

1. **Hold shutter button** - wait for alignment
2. **Get bubble very close to center** - within ~1mm
3. **Keep phone very level** - under 1.5Â° tilt
4. **Hold steady** - minimal shake
5. **Auto-capture fires** - when all conditions met

## Trade-offs

âœ… **Better**: More precise photos = better measurements  
âš ï¸ **Harder**: Requires steadier hands and more patience  
â„¹ï¸ **Fallback**: Quick tap still works for manual capture

## Version
Previous: 2.0.2 â†’ Current: **2.0.3**
